<!doctype html>
<html>
    <body style="background: #111; color: #fff; font-family: sans-serif; text-align: center">
        <h1>üìπ WebRTC Stream</h1>
        <video id="video" autoplay playsinline muted style="width: 90%; border: 2px solid white"></video>

        <script>
            const pc = new RTCPeerConnection({
                iceServers: [{ urls: 'stun:stun.l.google.com:19302' }],
            });

            // ‚úÖ –í–æ—Ç —ç—Ç–æ—Ç —à–∞–≥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô ‚Äî –±–µ–∑ –Ω–µ–≥–æ —Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞—á–Ω—ë—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å
            pc.addTransceiver('video', { direction: 'recvonly' });

            pc.ontrack = function (event) {
                console.log('üì° –¢—Ä–µ–∫ –ø–æ–ª—É—á–µ–Ω:', event.track.kind);
                document.getElementById('video').srcObject = event.streams[0];
            };

            async function start() {
                const offer = await pc.createOffer();
                await pc.setLocalDescription(offer);

                const response = await fetch('http://192.168.1.51:8080/offer', {
                    method: 'POST',
                    body: JSON.stringify(pc.localDescription),
                    headers: { 'Content-Type': 'application/json' },
                });

                const answer = await response.json();
                await pc.setRemoteDescription(answer);
            }

            start();
        </script>
    </body>
</html>
